<!DOCTYPE html>
<html>
<head>
  <title>DraftKings Player Scores</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
  <script src="https://rawgit.com/nnnick/Chart.js/master/Chart.min.js"></script>
  <script src="https://rawgit.com/jtblin/angular-chart.js/master/dist/angular-chart.min.js"></script>
  <script src="app.js"></script>
  <script src="controller.js"></script>
  <script src="services.js"></script>
  <link rel="stylesheet" href="app.css">
  <link rel="stylesheet" href="bower_components/angular-chart.js/dist/angular-chart.css">
</head>
<body ng-app="PlayerScoresApp">
<div> Draft Kings Player Scores Data </div>
<div ng-controller="playersController">
<div style="float: left;">
  <table class="data-table">
    <tr>
      <td><button ng-click="sortPos('QB')">QB</button></td>
      <td><button ng-disabled="1 == 0" ng-click="sortPos('RB')">RB</button></td>
      <td><button ng-click="sortPos('WR')">WR</button></td>
      <td><button ng-click="sortPos('TE')">TE</button></td>
      <td><button ng-click="sortPos('DEF')">DEF</button></td>
    </tr>
    <tr>
      <th colspan="5">
      <thread> Player Table
        <input style="float: right" type="text" ng-model="nameFilter" placeholder="Find a player..."/>
      </thread>
      </th>
    </tr>
    <tbody>
    <tr>
      <th>Player</th>
      <th>Position</th>
      <th>Team</th>
      <th>Total Points</th>
      <th>Last Week</th>
      <th>Salary</th>
    </tr>
      <tr ng-repeat="player in filterList | startFrom:currentPage*pageSize | limitTo:pageSize" ng-click="getGameData(player)">
        <td> {{ player.name }} </td>
        <td> {{ player.position }} </td>
        <td> {{ player.team }} </td>
        <td> {{ player.total_points }} </td>
        <td> {{ player.WeekPerformances[player.WeekPerformances.length - 1].points }} </td>
        <td> {{ player.salary == 0 ? "N/A" : "$" + player.salary }} </td>
        <td> <button ng-disabled="1 == 0" ng-click="addPlayer(player)">+</button></td>
      </tr>
      <tr>
        <td ng-show="pageSize == 32" ng-click="showMore()">Show more...</td>
        <td ng-show="pageSize > 32" ng-click="showLess()">Show less...</td>
      </tr>
    </tbody>
  </table>
  <button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">Previous</button>
    {{ currentPage+1 }}/{{ numberOfPages() }}
    <button ng-disabled="currentPage >= filterList.length/pageSize - 1" ng-click="currentPage=currentPage+1">Next</button>
  </div>
  <div style="display: inline-block; width: 600px; height: 200px">
    <table class="data-table" ng-show="currentPlayer">
      <thread>
        <tr><th colspan="19" class="left-align"> {{ currentPlayer.name }}</th></tr>
        <tr><th colspan="19" class="left-align"> {{ currentPlayer.team }} - {{ currentPlayer.position }} - {{ currentPlayer.salary == 0 ? "N/A" : "$" + currentPlayer.salary }}</th></tr>
      </thread>
      <tbody>
        <tr>
          <th class="left-align">Week</th>
          <td ng-repeat="performance in weekPerformances"> {{ performance.week }} </td>
        </tr>
        <tr>
          <th class="left-align">Points</th>
          <td ng-repeat="performance in weekPerformances"> {{ performance.points }} </td>
        </tr>
      </tbody>
    </table>
     <canvas ng-show="currentPlayer" id="line" class="chart chart-line" chart-data="data"
    chart-labels="labels" chart-series="series">
    </canvas>
  </div>
</div>
<div ng-controller="lineupController">
  <table class="data-table">
    <thread>Lineup</thread>
    <thead>
      <tr>
        <td>Position</td>
        <td>Player</td>
        <td>Salary</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>QB</td>
        <td> {{ qblist[0].name }}</td>
        <td> {{ qblist[0].salary }}</td>
        <td><button ng-click="removeFromLineup(qblist[0], false)" ng-show="qblist.length != 0">-</button></td>
      </tr>
      <tr>
        <td>RB</td>
        <td> {{ rblist[0].name }}</td>
        <td> {{ rblist[0].salary }}</td>
        <td><button ng-click="removeFromLineup(rblist[0], false)" ng-show="rblist.length != 0">-</button></td>
      </tr>
      <tr>
        <td>RB</td>
        <td> {{ rblist[1].name }}</td>
        <td> {{ rblist[1].salary }}</td>
        <td><button ng-click="removeFromLineup(rblist[1], false)" ng-show="rblist.length > 1">-</button></td>
      </tr>
      <tr>
        <td>WR</td>
        <td> {{ wrlist[0].name }}</td>
        <td> {{ wrlist[0].salary }}</td>
        <td><button ng-click="removeFromLineup(wrlist[0], false)" ng-show="wrlist.length != 0">-</button></td>
      </tr>
      <tr>
        <td>WR</td>
        <td> {{ wrlist[1].name }}</td>
        <td> {{ wrlist[1].salary }}</td>
        <td><button ng-click="removeFromLineup(wrlist[1], false)" ng-show="wrlist.length > 1">-</button></td>
      </tr>
      <tr>
        <td>WR</td>
        <td> {{ wrlist[2].name }}</td>
        <td> {{ wrlist[2].salary }}</td>
        <td><button ng-click="removeFromLineup(wrlist[2], false)" ng-show="wrlist.length > 2">-</button></td>
      </tr>
      <tr>
        <td>TE</td>
        <td> {{ telist[0].name }}</td>
        <td> {{ telist[0].salary }}</td>
        <td><button ng-click="removeFromLineup(telist[0], false)" ng-show="telist.length != 0">-</button></td>
      </tr>
      <tr>
        <td>DEF</td>
        <td> {{ deflist[0].name }}</td>
        <td> {{ deflist[0].salary }}</td>
        <td><button ng-click="removeFromLineup(deflist[0], false)" ng-show="deflist.length != 0">-</button></td>
      </tr>
      <tr>
        <td>FLEX</td>
        <td> {{ flexlist[0].name }}</td>
        <td> {{ flexlist[0].salary }}</td>
        <td><button ng-click="removeFromLineup(flexlist[0], true)" ng-show="flexlist.length != 0">-</button></td>
      </tr>
    </tbody>

  </table>
</div>
</body>
</html>
